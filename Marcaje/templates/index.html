{% extends 'template_base.html' %}
{% load static %}
{% block css %}
<meta name="google-signin-scope" content="profile email" />
<meta
  name="google-signin-client_id"
  content="YOUR_CLIENT_ID.apps.googleusercontent.com"
/>
<link rel="stylesheet" href="{% static 'css/estilo_general.css' %}" />
<script src="https://apis.google.com/js/platform.js" async defer></script>
{% endblock %} 
{% block content %}
<div class="contenedor-centrado">
  <div class="card">
    <div class="card-body m-4">
      <h5 class="d-flex justify-content-center p-2 mb-3">Iniciar sesion</h5>
      <div class="form">
        <form action="" method="post">
          {% csrf_token %}
          <div class="form-group row">
            <input type="email" name="usuario" id="usuario" placeholder="Usuario" class="form-control">
          </div>
          <div class="form-group row">
            <input type="password" name="password" id="password" placeholder="Contraseña" class="form-control">
          </div>
          <div class="form-group row">
            <input type="submit" value="Iniciar sesión" class="btn btn-primary btn-block btn-lg">
          </div>
        </form>
      </div>
      <div class="d-flex justify-content-center mb-4 mt-4" a>
        <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
      </div>
      <label for="">¿No tienes cuenta?</label>&nbsp;<a href="{% url 'registro' %}">Registrate</a>
    </div>
  </div>
</div>
{% endblock %} 
{% block js %}
<script>
  function onSignIn(googleUser) {
    // Useful data for your client-side scripts:
    var profile = googleUser.getBasicProfile();
    console.log("ID: " + profile.getId()); // Don't send this directly to your server!
    console.log("Full Name: " + profile.getName());
    console.log("Given Name: " + profile.getGivenName());
    console.log("Family Name: " + profile.getFamilyName());
    console.log("Image URL: " + profile.getImageUrl());
    console.log("Email: " + profile.getEmail());

    // The ID token you need to pass to your backend:
    var id_token = googleUser.getAuthResponse().id_token;
    console.log("ID Token: " + id_token);
  }
</script>
{% endblock %}
